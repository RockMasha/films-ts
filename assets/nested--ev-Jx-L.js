var A=(t,e,s)=>{if(!e.has(t))throw TypeError("Cannot "+s)};var i=(t,e,s)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,s)};var n=(t,e,s)=>(A(t,e,"access private method"),s);import{c as x,a as j,b as N,r as D}from"./removeContentLoader-zC0V3zHf.js";const r={genresTypesList:document.querySelector(".genres__list"),genresMoviesBlock:document.querySelector(".genres__movies"),headerGenresLink:document.querySelector(".header-nav__link__genres"),scrollToTopBtn:document.querySelector(".genres-btn-up"),BtnTopProgressLine:document.querySelector(".genres-btn-up__line")};function $(){r.headerGenresLink instanceof HTMLElement&&r.headerGenresLink.setAttribute("active","")}window.onscroll=U;r.scrollToTopBtn instanceof HTMLElement&&r.scrollToTopBtn.addEventListener("click",z);function U(){if(J()){K(),M();return}Q()}function z(){window.scrollTo({top:0,behavior:"smooth"})}function M(){const t=R();r.BtnTopProgressLine instanceof HTMLElement&&(r.BtnTopProgressLine.style.strokeDasharray=`${t}, 100`)}function J(){return document.body.scrollTop>100||document.documentElement.scrollTop>100}function K(){r.scrollToTopBtn instanceof HTMLElement&&(r.scrollToTopBtn.style.display="block")}function Q(){r.scrollToTopBtn instanceof HTMLElement&&(r.scrollToTopBtn.style.display="none")}function R(){const{scrollTop:t,scrollHeight:e,clientHeight:s}=document.documentElement,a=t||document.body.scrollTop,y=e-s;return a/y*100}var f,_,u,G,m,k,g,w,l,E,p,H,c,C,T,F,L,I,b,O,B,S,v,q,o,h;class V{constructor(e){i(this,f);i(this,u);i(this,m);i(this,g);i(this,l);i(this,p);i(this,c);i(this,T);i(this,L);i(this,b);i(this,B);i(this,v);i(this,o);this.page=1,this.isNoBtn=!0,this.listCardsEl=e.querySelector(".cards-list"),this.fatherElement=e,this.btn,this.genresId,this.page=1,this.max_films,this.isNoBtn=!0}async setCardsOnGenres(e){if(n(this,f,_).call(this,e))return;n(this,v,q).call(this)||n(this,b,O).call(this),!this.isNoBtn&&this.btn?n(this,l,E).call(this):this.isNoBtn=!1,this.setGenresId(e),this.listCardsEl&&(this.listCardsEl.innerHTML=""),this.resetPage(),await this.setCardsOfFilms()!=="error"&&(n(this,g,w).call(this),n(this,B,S).call(this))}async setCardsOfFilms(){this.nextPage(),(this.page!==1||n(this,o,h).call(this))&&(n(this,p,H).call(this),n(this,T,F).call(this));let e="ok";try{const s=await x(j,{genreId:this.genresId,page:this.page}),{cards:a,maxFilms:y}=s;n(this,u,G).call(this,a.join("")),n(this,m,k).call(this,y)}catch{e="error"}return n(this,o,h).call(this)&&(n(this,l,E).call(this),this.isNoBtn=!0),this.page!==1&&!n(this,o,h).call(this)&&(n(this,c,C).call(this),n(this,L,I).call(this)),M(),e}setGenresId(e){this.genresId=e}nextPage(){this.page+=1}resetPage(){this.page=0}}f=new WeakSet,_=function(e){return this.genresId===e},u=new WeakSet,G=function(e){this.listCardsEl&&this.listCardsEl.insertAdjacentHTML("beforeend",e)},m=new WeakSet,k=function(e){this.max_films=e},g=new WeakSet,w=function(){this.fatherElement.insertAdjacentHTML("beforeend",'<button class="genres__bth-more">More movies</button>'),this.btn=document.querySelector(".genres__bth-more"),n(this,c,C).call(this)},l=new WeakSet,E=function(){this.btn&&this.btn.remove()},p=new WeakSet,H=function(){this.btn&&this.btn.removeEventListener("click",this.showMoreFilms)},c=new WeakSet,C=function(){this.showMoreFilms=this.setCardsOfFilms.bind(this),this.btn&&this.btn.addEventListener("click",this.showMoreFilms)},T=new WeakSet,F=function(){this.btn&&this.btn.insertAdjacentHTML("beforeend",W())},L=new WeakSet,I=function(){if(!this.btn)return;const e=this.btn.querySelector(".btnMoreLoader");e&&e.remove()},b=new WeakSet,O=function(){this.fatherElement.insertAdjacentHTML("beforeend",X())},B=new WeakSet,S=function(){const e=this.fatherElement.querySelector(".genresCard-loader");e&&e.remove()},v=new WeakSet,q=function(){return!!this.fatherElement.querySelector(".genresCard-loader")},o=new WeakSet,h=function(){return this.page*20>=this.max_films};function W(){return'<div class="btnMoreLoader"></div>'}function X(){return'<div class="genresCard-loader"></div>'}let P;r.genresMoviesBlock instanceof HTMLElement&&(P=new V(r.genresMoviesBlock));function Y(t){const s=t.target.closest(".genres__item");if(!s)return;const a=ee(s);P.setCardsOnGenres(a),Z(s)}let d=null;function Z(t){d!==t&&(d&&d.removeAttribute("active"),t&&t.setAttribute("active",""),d=t)}function ee(t){if(t){const e=t.dataset.genresId;return e!==void 0?e:null}return"error"}async function te(){return(await N()).genres}async function se(){const e=(await te()).map(s=>ne(s));r.genresTypesList&&(r.genresTypesList.innerHTML=e.join(""))}function ne(t){const{id:e,name:s}=t;return`<li class="genres__item" data-genres-id="${e}">
              <button class="genres-item__btn">${s}</button>
            </li>
    `}$();await se();r.genresTypesList instanceof HTMLElement&&r.genresTypesList.addEventListener("click",Y);D();
